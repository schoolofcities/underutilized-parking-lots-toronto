import{s as F,c as nt,u as rt,g as it,a as ct,o as lt,f as at,n as B,x as ut,y as ft}from"../chunks/scheduler.dPxypghx.js";import{S as J,i as Q,e as y,c as b,d as T,g as u,j as P,t as H,a as N,p as d,A as pt,s as M,m as q,B as dt,h as V,n as U,o as mt,k as g,q as Z,r as G,C as ht,w as X,b as Y,f as $,D as tt}from"../chunks/index.DsZkKiE-.js";import{e as et}from"../chunks/each.1uDehOE-.js";import{T as vt}from"../chunks/TopSofC.EjI18Fr9.js";import{a as W,C as _t,S as gt,P as yt,B as bt}from"../chunks/3dModels.Q89hKEUD.js";import{L as D}from"../chunks/lots.Cyl13BzJ.js";/* empty css                       */const kt=!0,Ut=Object.freeze(Object.defineProperty({__proto__:null,prerender:kt},Symbol.toStringTag,{value:"Module"}));function Tt(r){let o,s;const a=r[7].default,t=nt(a,r,r[6],null);return{c(){o=y("div"),t&&t.c()},l(e){o=b(e,"DIV",{});var n=T(o);t&&t.l(n),n.forEach(u)},m(e,n){P(e,o,n),t&&t.m(o,null),r[8](o),s=!0},p(e,[n]){t&&t.p&&(!s||n&64)&&rt(t,a,e,e[6],s?ct(a,e[6],n,null):it(e[6]),null)},i(e){s||(H(t,e),s=!0)},o(e){N(t,e),s=!1},d(e){e&&u(o),t&&t.d(e),r[8](null)}}}function xt(r,o,s){let{$$slots:a={},$$scope:t}=o,{root:e=null}=o,{top:n=0}=o,{bottom:l=0}=o,{increments:f=100}=o,{value:_=void 0}=o;const m=[],p=[];let v=[],h=[],I;const j=()=>{v.length&&v.forEach(S)},C=()=>{let i=0,x=0;for(let w=0;w<m.length;w++)m[w]>i&&(i=m[w],x=w);i>0?s(1,_=x):s(1,_=void 0)},S=(i,x)=>{const w=A=>{A[0].isIntersecting;const R=A[0].intersectionRatio;m[x]=R,C()},O=n?n*-1:0,c=l?l*-1:0,k=`${O}px 0px ${c}px 0px`,E={root:e,rootMargin:k,threshold:p};h[x]&&h[x].disconnect();const L=new IntersectionObserver(w,E);L.observe(i),h[x]=L};lt(()=>{for(let i=0;i<f+1;i++)p.push(i/f);v=I.querySelectorAll(":scope > *"),j()});function z(i){at[i?"unshift":"push"](()=>{I=i,s(0,I)})}return r.$$set=i=>{"root"in i&&s(2,e=i.root),"top"in i&&s(3,n=i.top),"bottom"in i&&s(4,l=i.bottom),"increments"in i&&s(5,f=i.increments),"value"in i&&s(1,_=i.value),"$$scope"in i&&s(6,t=i.$$scope)},r.$$.update=()=>{r.$$.dirty&24&&j()},[I,_,e,n,l,f,t,a,z]}class Et extends J{constructor(o){super(),Q(this,o,xt,Tt,F,{root:2,top:3,bottom:4,increments:5,value:1})}}function It(r){let o;return{c(){o=y("div"),this.h()},l(s){o=b(s,"DIV",{id:!0,class:!0}),T(o).forEach(u),this.h()},h(){d(o,"id","map"),d(o,"class","svelte-1ppnwb2")},m(s,a){P(s,o,a)},p:B,i:B,o:B,d(s){s&&u(o)}}}let St="/underutilized-parking-lots-toronto/3DMassingToronto.pmtiles",Lt="/underutilized-parking-lots-toronto/ParkingLotArea.pmtiles",Dt="/underutilized-parking-lots-toronto/toronto.pmtiles";function Pt(r,o,s){let{step:a}=o,t,e,n,l=new W.ScaleControl({maxWidth:100,unit:"metric"});const f=[[-79.7712,43.44],[-78.914763,43.93074]];return lt(()=>{s(2,e=document.body.clientHeight);let _=new yt;W.addProtocol("pmtiles",_.tile),s(1,t=new W.Map({container:"map",style:{version:8,name:"Empty",glyphs:"https://schoolofcities.github.io/fonts/fonts/{fontstack}/{range}.pbf",sources:{},layers:[{id:"background",type:"background",paint:{"background-color":"rgba(0,0,0,0)"}}]},center:[-79.37,43.715],zoom:10.5,maxZoom:16.5,minZoom:10,maxPitch:85,bearing:-17.1,projection:"globe",scrollZoom:!0,maxBounds:f,attributionControl:!0}));const p=['<a href="https://openstreetmap.org">OpenStreetMap</a>','<a href="https://open.toronto.ca/">City of Toronto </a>'].join(", ");t.addControl(l,"bottom-left");let v=bt;t.on("load",function(){t.addSource("protomaps",{type:"vector",url:"pmtiles://"+Dt,attribution:p,attributionControl:!1}),v.forEach(h=>{t.addLayer(h)}),t.addLayer(_t),t.addLayer(gt),t.addSource("massing",{type:"vector",url:"pmtiles://"+St}),t.addSource("parking",{type:"vector",url:"pmtiles://"+Lt}),e>700&&n>800&&t.zoomTo(10.5)})}),r.$$set=_=>{"step"in _&&s(0,a=_.step)},r.$$.update=()=>{r.$$.dirty&4,r.$$.dirty&3&&(a==0&&(t.flyTo(D[0]),setTimeout(()=>{t.setPaintProperty("parking-layer","fill-opacity",0)},100)),a==1&&(t.flyTo(D[0]),t.addLayer({id:"parking-layer",type:"fill",source:"parking","source-layer":"parkinglotarea",paint:{"fill-color":"black","fill-opacity":0}}),setTimeout(()=>{t.setPaintProperty("parking-layer","fill-opacity",1)},100)),a==2&&(setTimeout(()=>{t.setPaintProperty("parking-layer","fill-opacity",0)},100),setTimeout(()=>{t.flyTo(D[2])},100),t.removeLayer("massing-layer")),a==3&&t.addLayer({id:"massing-layer",type:"fill-extrusion",source:"massing","source-layer":"3DMassingToronto",paint:{"fill-extrusion-color":"#D3D3D3","fill-extrusion-height":["get","height"]}}),a==5&&t.flyTo(D[1]),a==6&&t.flyTo(D[2]),a==7&&t.flyTo(D[0]),a==8&&t.flyTo(D[1]),a==9&&t.flyTo(D[2]))},[a,t,e]}class wt extends J{constructor(o){super(),Q(this,o,Pt,It,F,{step:0})}}function ot(r,o,s){const a=r.slice();return a[4]=o[s],a[6]=s,a}function Ct(r){let o,s,a,t=r[4].title+"",e,n,l,f=r[4].content+"",_;return{c(){o=y("div"),s=y("div"),a=y("h3"),e=Y(t),n=M(),l=y("p"),_=Y(f),this.h()},l(m){o=b(m,"DIV",{class:!0});var p=T(o);s=b(p,"DIV",{class:!0});var v=T(s);a=b(v,"H3",{class:!0});var h=T(a);e=$(h,t),h.forEach(u),n=V(v),l=b(v,"P",{class:!0});var I=T(l);_=$(I,f),I.forEach(u),v.forEach(u),p.forEach(u),this.h()},h(){d(a,"class","svelte-1o83axv"),d(l,"class","svelte-1o83axv"),d(s,"class","step-content svelte-1o83axv"),d(o,"class","step svelte-1o83axv"),tt(o,"active",r[0]===r[6])},m(m,p){P(m,o,p),g(o,s),g(s,a),g(a,e),g(s,n),g(s,l),g(l,_)},p(m,p){p&1&&tt(o,"active",m[0]===m[6])},d(m){m&&u(o)}}}function Mt(r){let o;return{c(){o=y("div"),this.h()},l(s){o=b(s,"DIV",{class:!0}),T(o).forEach(u),this.h()},h(){d(o,"class","spacer svelte-1o83axv")},m(s,a){P(s,o,a)},p:B,d(s){s&&u(o)}}}function st(r){let o;function s(e,n){return e[4]==="spacer"?Mt:Ct}let t=s(r)(r);return{c(){t.c(),o=X()},l(e){t.l(e),o=X()},m(e,n){t.m(e,n),P(e,o,n)},p(e,n){t.p(e,n)},d(e){e&&u(o),t.d(e)}}}function Vt(r){let o,s,a=et(r[1]),t=[];for(let e=0;e<a.length;e+=1)t[e]=st(ot(r,a,e));return{c(){for(let e=0;e<t.length;e+=1)t[e].c();o=M(),s=y("div"),this.h()},l(e){for(let n=0;n<t.length;n+=1)t[n].l(e);o=V(e),s=b(e,"DIV",{class:!0}),T(s).forEach(u),this.h()},h(){d(s,"class","spacer svelte-1o83axv")},m(e,n){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(e,n);P(e,o,n),P(e,s,n)},p(e,n){if(n&3){a=et(e[1]);let l;for(l=0;l<a.length;l+=1){const f=ot(e,a,l);t[l]?t[l].p(f,n):(t[l]=st(f),t[l].c(),t[l].m(o.parentNode,o))}for(;l<t.length;l+=1)t[l].d(1);t.length=a.length}},d(e){e&&(u(o),u(s)),ht(t,e)}}}function jt(r){let o,s,a,t,e,n,l,f,_='<h1 class="svelte-1o83axv">Underutilized Parking Lots in Toronto</h1> <h2 class="svelte-1o83axv">By <a href="link" target="_blank" class="svelte-1o83axv">Author</a></h2>',m,p,v,h,I,j,C,S,z,i,x;e=new vt({});function w(c){r[2](c)}let O={$$slots:{default:[Vt]},$$scope:{ctx:r}};return r[0]!==void 0&&(O.value=r[0]),h=new Et({props:O}),at.push(()=>pt(h,"value",w)),S=new wt({props:{step:r[0]}}),{c(){o=y("meta"),s=y("script"),t=M(),q(e.$$.fragment),n=M(),l=y("section"),f=y("div"),f.innerHTML=_,m=M(),p=y("div"),v=y("div"),q(h.$$.fragment),j=M(),C=y("div"),q(S.$$.fragment),z=M(),i=y("div"),this.h()},l(c){const k=dt("svelte-1490rbj",document.head);o=b(k,"META",{name:!0,content:!0,class:!0}),s=b(k,"SCRIPT",{src:!0,class:!0}),T(s).forEach(u),k.forEach(u),t=V(c),U(e.$$.fragment,c),n=V(c),l=b(c,"SECTION",{class:!0});var E=T(l);f=b(E,"DIV",{class:!0,"data-svelte-h":!0}),mt(f)!=="svelte-sv8db1"&&(f.innerHTML=_),m=V(E),p=b(E,"DIV",{class:!0});var L=T(p);v=b(L,"DIV",{class:!0});var A=T(v);U(h.$$.fragment,A),A.forEach(u),j=V(L),C=b(L,"DIV",{class:!0});var R=T(C);U(S.$$.fragment,R),R.forEach(u),L.forEach(u),z=V(E),i=b(E,"DIV",{class:!0}),T(i).forEach(u),E.forEach(u),this.h()},h(){d(o,"name","viewport"),d(o,"content","width=device-width, initial-scale=1, minimum-scale=1"),d(o,"class","svelte-1o83axv"),ut(s.src,a="https://unpkg.com/maplibre-gl@4.3.2/dist/maplibre-gl.js")||d(s,"src",a),d(s,"class","svelte-1o83axv"),d(f,"class","hero svelte-1o83axv"),d(v,"class","steps-container svelte-1o83axv"),d(C,"class","sticky svelte-1o83axv"),d(p,"class","section-container svelte-1o83axv"),d(i,"class","spacer svelte-1o83axv"),d(l,"class","svelte-1o83axv")},m(c,k){g(document.head,o),g(document.head,s),P(c,t,k),Z(e,c,k),P(c,n,k),P(c,l,k),g(l,f),g(l,m),g(l,p),g(p,v),Z(h,v,null),g(p,j),g(p,C),Z(S,C,null),g(l,z),g(l,i),x=!0},p(c,[k]){const E={};k&129&&(E.$$scope={dirty:k,ctx:c}),!I&&k&1&&(I=!0,E.value=c[0],ft(()=>I=!1)),h.$set(E);const L={};k&1&&(L.step=c[0]),S.$set(L)},i(c){x||(H(e.$$.fragment,c),H(h.$$.fragment,c),H(S.$$.fragment,c),x=!0)},o(c){N(e.$$.fragment,c),N(h.$$.fragment,c),N(S.$$.fragment,c),x=!1},d(c){c&&(u(t),u(n),u(l)),u(o),u(s),G(e,c),G(h),G(S)}}}const K="spacer";function zt(r,o,s){let a;function t(l){return{title:D[l].title,content:D[l].content}}const e=[t(0),t(1),t(2),K,K,t(3),t(4),t(5),K,t(6)];function n(l){a=l,s(0,a)}return[a,e,n]}class Zt extends J{constructor(o){super(),Q(this,o,zt,jt,F,{})}}export{Zt as component,Ut as universal};
